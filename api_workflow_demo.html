<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedCor API Workflow Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .workflow-step {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }
        
        .workflow-step h3 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .step-number {
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .endpoint {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid #e0e0e0;
        }
        
        .method {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            color: white;
            font-weight: bold;
            font-size: 0.85em;
            margin-right: 10px;
        }
        
        .method.GET { background: #28a745; }
        .method.POST { background: #007bff; }
        .method.PUT { background: #ffc107; color: #333; }
        .method.PATCH { background: #17a2b8; }
        .method.DELETE { background: #dc3545; }
        
        .endpoint-url {
            font-family: 'Courier New', monospace;
            color: #333;
            font-size: 0.95em;
        }
        
        .code-block {
            background: #2d3748;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        .code-block pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }
        
        .highlight {
            background: #ffd700;
            color: #333;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .api-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #f0f0f0;
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            color: #666;
            margin-top: 5px;
        }
        
        .documentation-links {
            display: flex;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .doc-link {
            flex: 1;
            min-width: 250px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-decoration: none;
            color: #333;
            border: 2px solid #667eea;
            transition: all 0.3s;
            text-align: center;
        }
        
        .doc-link:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .doc-link h4 {
            margin-bottom: 10px;
        }
        
        .doc-link p {
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .tag-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .tag {
            background: #e8eaf6;
            color: #5c6bc0;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
        }
        
        .flow-diagram {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin: 30px 0;
            text-align: center;
        }
        
        .flow-item {
            display: inline-block;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border-radius: 8px;
            margin: 5px;
        }
        
        .flow-arrow {
            display: inline-block;
            margin: 0 10px;
            color: #667eea;
            font-size: 1.5em;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .api-stats {
                grid-template-columns: 1fr;
            }
            
            .documentation-links {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• MedCor Healthcare Platform API</h1>
            <p>Complete API Workflow Documentation & Interactive Guide</p>
        </div>
        
        <div class="content">
            <div class="api-stats">
                <div class="stat-card">
                    <div class="stat-number">65</div>
                    <div class="stat-label">Total Endpoints</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">10</div>
                    <div class="stat-label">ViewSets</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">9</div>
                    <div class="stat-label">API Categories</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">21</div>
                    <div class="stat-label">Schema Models</div>
                </div>
            </div>
            
            <div class="documentation-links">
                <a href="http://localhost:8002/api/docs/" class="doc-link" target="_blank">
                    <h4>üìñ Swagger UI</h4>
                    <p>Interactive API documentation with try-it-out feature</p>
                </a>
                <a href="http://localhost:8002/api/redoc/" class="doc-link" target="_blank">
                    <h4>üìö ReDoc</h4>
                    <p>Clean, readable API documentation</p>
                </a>
                <a href="http://localhost:8002/api/schema/" class="doc-link" target="_blank">
                    <h4>üìÑ OpenAPI Schema</h4>
                    <p>Raw OpenAPI 3.0 specification</p>
                </a>
            </div>
            
            <h2 style="margin: 30px 0 20px; color: #333;">üöÄ API Workflow - Getting Started</h2>
            
            <div class="flow-diagram">
                <span class="flow-item">Hospital</span>
                <span class="flow-arrow">‚Üí</span>
                <span class="flow-item">Admin User</span>
                <span class="flow-arrow">‚Üí</span>
                <span class="flow-item">Staff/Doctors</span>
                <span class="flow-arrow">‚Üí</span>
                <span class="flow-item">Patients</span>
                <span class="flow-arrow">‚Üí</span>
                <span class="flow-item">Services</span>
            </div>
            
            <div class="workflow-step">
                <h3><span class="step-number">1</span> Create Hospital (Tenant)</h3>
                <p style="margin-bottom: 15px;">First, create a hospital which serves as the tenant in our multi-tenant architecture:</p>
                
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/hospitals/</span>
                </div>
                
                <div class="code-block">
                    <pre>{
  "name": "City General Hospital",
  "city": "New York",
  "state": "NY",
  "country": "USA",
  "hospital_type": "general",
  "contact_email": "admin@citygeneral.com",
  "contact_phone": "+1-212-555-0100"
}</pre>
                </div>
                
                <p style="margin-top: 15px;"><strong>Response:</strong> Returns hospital object with <span class="highlight">id</span> (use as tenant ID)</p>
            </div>
            
            <div class="workflow-step">
                <h3><span class="step-number">2</span> User Registration & Authentication</h3>
                <p style="margin-bottom: 15px;">Register the first admin user and get JWT tokens:</p>
                
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/auth/register/</span>
                </div>
                
                <div class="code-block">
                    <pre>{
  "email": "admin@hospital.com",
  "password": "SecurePassword123!",
  "password_confirm": "SecurePassword123!",
  "first_name": "John",
  "last_name": "Admin",
  "role": "admin",
  "hospital": 1,  // Hospital ID from Step 1
  "phone_number": "+1-212-555-0101"
}</pre>
                </div>
                
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/auth/login/</span>
                </div>
                
                <p style="margin-top: 15px;"><strong>Response:</strong> Returns <span class="highlight">access</span> and <span class="highlight">refresh</span> tokens for authentication</p>
            </div>
            
            <div class="workflow-step">
                <h3><span class="step-number">3</span> Create Core Users</h3>
                <p style="margin-bottom: 15px;">Create doctors, nurses, and patients (requires authentication):</p>
                
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/auth/users/</span>
                    <span style="color: #666; font-size: 0.9em;">(Create Doctor)</span>
                </div>
                
                <div class="code-block">
                    <pre>Headers: { "Authorization": "Bearer &lt;access_token&gt;" }

{
  "email": "dr.smith@hospital.com",
  "username": "drsmith",
  "password": "DoctorPass123!",
  "first_name": "Jane",
  "last_name": "Smith",
  "role": "doctor",
  "hospital": 1,
  "department": "Cardiology",
  "license_number": "MD123456",
  "years_of_experience": 10
}</pre>
                </div>
                
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/specialty/doctor-specialties/</span>
                    <span style="color: #666; font-size: 0.9em;">(Assign Specialty)</span>
                </div>
            </div>
            
            <div class="workflow-step">
                <h3><span class="step-number">4</span> Set Up Medical Services</h3>
                <p style="margin-bottom: 15px;">Configure doctor availability and medical records:</p>
                
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/appointments/availability-slots/</span>
                </div>
                
                <div class="code-block">
                    <pre>{
  "doctor": 2,
  "start_time": "2025-01-20T09:00:00Z",
  "end_time": "2025-01-20T17:00:00Z",
  "is_available": true
}</pre>
                </div>
                
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/medical-records/</span>
                </div>
            </div>
            
            <div class="workflow-step">
                <h3><span class="step-number">5</span> Operational Workflows</h3>
                <p style="margin-bottom: 15px;">Book appointments and record treatments:</p>
                
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/appointments/</span>
                </div>
                
                <div class="code-block">
                    <pre>{
  "patient": 3,
  "doctor": 2,
  "slot": 1,
  "appointment_type": "consultation",
  "reason": "Regular checkup",
  "notes": "Patient requests morning appointment"
}</pre>
                </div>
                
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/treatments/</span>
                </div>
                
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/treatments/{id}/prescriptions/</span>
                </div>
            </div>
            
            <h2 style="margin: 40px 0 20px; color: #333;">üè∑Ô∏è API Categories</h2>
            
            <div class="tag-list">
                <span class="tag">Authentication</span>
                <span class="tag">Hospitals</span>
                <span class="tag">Users</span>
                <span class="tag">Appointments</span>
                <span class="tag">Medical Records</span>
                <span class="tag">Treatments</span>
                <span class="tag">Specialties</span>
                <span class="tag">Subscriptions</span>
                <span class="tag">Chat & Voice</span>
            </div>
            
            <h2 style="margin: 40px 0 20px; color: #333;">üìã Complete Endpoints List</h2>
            
            <div class="workflow-step">
                <h3>Authentication Endpoints</h3>
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/auth/register/</span>
                </div>
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/auth/login/</span>
                </div>
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/auth/logout/</span>
                </div>
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/auth/token/refresh/</span>
                </div>
                <div class="endpoint">
                    <span class="method GET">GET</span>
                    <span class="endpoint-url">/api/auth/profile/</span>
                </div>
                <div class="endpoint">
                    <span class="method PUT">PUT</span>
                    <span class="endpoint-url">/api/auth/profile/</span>
                </div>
            </div>
            
            <div class="workflow-step">
                <h3>User Management</h3>
                <div class="endpoint">
                    <span class="method GET">GET</span>
                    <span class="endpoint-url">/api/auth/users/</span>
                </div>
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/auth/users/</span>
                </div>
                <div class="endpoint">
                    <span class="method GET">GET</span>
                    <span class="endpoint-url">/api/auth/users/{id}/</span>
                </div>
                <div class="endpoint">
                    <span class="method PUT">PUT</span>
                    <span class="endpoint-url">/api/auth/users/{id}/</span>
                </div>
                <div class="endpoint">
                    <span class="method DELETE">DELETE</span>
                    <span class="endpoint-url">/api/auth/users/{id}/</span>
                </div>
                <div class="endpoint">
                    <span class="method GET">GET</span>
                    <span class="endpoint-url">/api/auth/users/doctors/</span>
                </div>
                <div class="endpoint">
                    <span class="method GET">GET</span>
                    <span class="endpoint-url">/api/auth/users/patients/</span>
                </div>
            </div>
            
            <div class="workflow-step">
                <h3>Hospital Management</h3>
                <div class="endpoint">
                    <span class="method GET">GET</span>
                    <span class="endpoint-url">/api/hospitals/</span>
                </div>
                <div class="endpoint">
                    <span class="method POST">POST</span>
                    <span class="endpoint-url">/api/hospitals/</span>
                </div>
                <div class="endpoint">
                    <span class="method GET">GET</span>
                    <span class="endpoint-url">/api/hospitals/{id}/</span>
                </div>
                <div class="endpoint">
                    <span class="method PUT">PUT</span>
                    <span class="endpoint-url">/api/hospitals/{id}/</span>
                </div>
                <div class="endpoint">
                    <span class="method GET">GET</span>
                    <span class="endpoint-url">/api/hospitals/{id}/statistics/</span>
                </div>
            </div>
            
            <h2 style="margin: 40px 0 20px; color: #333;">üîê Authentication</h2>
            
            <div class="workflow-step">
                <p>All endpoints (except registration/login) require JWT authentication:</p>
                <ul style="margin: 15px 0; padding-left: 20px; line-height: 1.8;">
                    <li>Include <code>Authorization: Bearer &lt;token&gt;</code> in request headers</li>
                    <li>Tokens expire after 60 minutes</li>
                    <li>Use refresh token endpoint to get new access tokens</li>
                    <li>Refresh tokens are valid for 7 days</li>
                </ul>
            </div>
            
            <h2 style="margin: 40px 0 20px; color: #333;">üìä Rate Limiting</h2>
            
            <div class="workflow-step">
                <ul style="padding-left: 20px; line-height: 1.8;">
                    <li><strong>Authenticated Users:</strong> 100 requests per minute</li>
                    <li><strong>Unauthenticated Users:</strong> 20 requests per minute</li>
                    <li><strong>Bulk Operations:</strong> 10 requests per minute</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>